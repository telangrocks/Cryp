# =============================================================================
# CryptoPulse - pnpm Configuration
# =============================================================================

# Store configuration
# Use a global store to save disk space and speed up installs
store-dir=~/.pnpm-store

# Node linker (use isolated for better compatibility with deployment platforms)
# 'isolated' creates a proper node_modules structure without symlinks
node-linker=hoisted

# Lockfile configuration
# Ensure lockfile is always up to date
lockfile=true

# Peer dependencies
# Auto-install peer dependencies
auto-install-peers=true
strict-peer-dependencies=false

# Package resolution
# Prefer offline packages when available
prefer-offline=true

# Use frozen lockfile in CI/CD
# This should be set via command line: pnpm install --frozen-lockfile

# Hoist settings
# Hoist all dependencies to root node_modules for better compatibility
hoist=true
hoist-pattern[]=*
shamefully-hoist=true

# Registry
registry=https://registry.npmjs.org/

# Package installation
# Side effects cache for faster installs
side-effects-cache=true
side-effects-cache-readonly=false

# Network settings
# Increase network timeout for slower connections
network-timeout=60000
fetch-retries=3
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=60000

# Progress
# Show progress during install
progress=true

# Node version management
# Use system Node version
use-node-version=system

# Workspace settings
# Enable workspace protocol
link-workspace-packages=true
prefer-workspace-packages=true

# Public hoist pattern
# Hoist these packages to make them accessible
public-hoist-pattern[]=*eslint*
public-hoist-pattern[]=*prettier*
public-hoist-pattern[]=*typescript*
public-hoist-pattern[]=@types/*

# Resolution mode
resolution-mode=highest

# Dedupe peers
dedupe-peer-dependents=true

# Engine strict
# Don't fail on engine mismatch
engine-strict=false

# Save exact versions
save-exact=false
save-prefix=^

# Enable modules cache
modules-cache-max-age=604800

# Virtual store directory
virtual-store-dir=node_modules/.pnpm

# Verify store integrity
verify-store-integrity=true

# Enable package import method
package-import-method=auto

# Production install optimization
# When running pnpm install --prod, these are respected
ignore-scripts=false

# Shamefully flatten for better Docker compatibility
shamefully-flatten=false
